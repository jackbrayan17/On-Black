<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>On Black - Boutique</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .product-image-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .product-image-front, .product-image-back {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }
        .product-image-back {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
        }
        .product-image-container:hover .product-image-front {
            opacity: 0;
        }
        .product-image-container:hover .product-image-back {
            opacity: 1;
        }
        .thumbnail {
            cursor: pointer;
            transition: border 0.3s ease;
        }
        .thumbnail-active {
            border: 2px solid yellow;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <header class="bg-black text-white p-4 flex justify-between items-center">
        <div class="flex items-center space-x-4">
            <h1 class="text-2xl font-bold">On Black</h1>
            <span id="cart-count" class="bg-red-600 text-white rounded-full px-2 py-1">0</span>
        </div>
        <nav>
            <ul class="flex space-x-4">
                <li><a href="#" class="hover:underline">Accueil</a></li>
                <li><a href="#" class="hover:underline">Boutique</a></li>
                <li><a href="#" class="hover:underline">À propos</a></li>
                <li><a href="#" class="hover:underline">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="container mx-auto p-4">
        <div class="flex justify-center space-x-4 mb-8">
            <button class="filter-btn px-4 py-2 bg-black text-white rounded" data-type="Tous">Tous</button>
            <button class="filter-btn px-4 py-2 bg-gray-200 text-black rounded" data-type="Tshirts">T-Shirts</button>
        </div>

        <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <p>Chargement des produits...</p>
        </div>
    </section>

    <!-- Modal -->
    <div id="product-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg max-w-lg w-full">
            <h2 id="modal-title" class="text-2xl font-bold mb-4"></h2>
            <div class="flex flex-col items-center">
                <img id="modal-main-image" src="" alt="Main product image" class="w-full h-64 object-cover mb-4">
                <div class="flex space-x-2">
                    <img id="modal-thumbnail-front" class="thumbnail w-16 h-16 object-cover" src="" alt="Front thumbnail">
                    <img id="modal-thumbnail-back" class="thumbnail w-16 h-16 object-cover" src="" alt="Back thumbnail">
                </div>
            </div>
            <p id="modal-description" class="mt-4"></p>
            <p id="modal-price" class="mt-2 font-bold"></p>
            <div class="mt-4">
                <label for="modal-size" class="block">Taille:</label>
                <select id="modal-size" class="border p-2 w-full">
                    <!-- Sizes will be populated dynamically -->
                </select>
            </div>
            <button id="add-to-cart" class="mt-4 bg-black text-white px-4 py-2 rounded">Ajouter au panier</button>
            <button id="close-modal" class="mt-2 bg-gray-200 px-4 py-2 rounded">Fermer</button>
        </div>
    </div>

    <footer class="bg-black text-white p-4 text-center mt-8">
        <p>© 2025 On Black. Tous droits réservés.</p>
        <p>Contactez-nous : <a href="mailto:contact@onblack.com" class="underline">contact@onblack.com</a></p>
        <p>Mode de vie élégant, directement de Yaoundé</p>
    </footer>

    <script>
        // Load products from JSON
        fetch('produits.json')
            .then(response => response.json())
            .then(products => {
                // Shuffle products for random display
                const shuffledProducts = products.sort(() => Math.random() - 0.5);
                displayProducts(shuffledProducts);
                setupFilters(shuffledProducts);
            });

        function displayProducts(products) {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white p-4 rounded shadow cursor-pointer';
                productCard.innerHTML = `
                    <div class="product-image-container h-64">
                        <img src="${product.images.front}" alt="${product.name}" class="product-image-front">
                        <img src="${product.images.back}" alt="${product.name} back" class="product-image-back">
                    </div>
                    <h3 class="text-lg font-bold mt-2">${product.name}</h3>
                    <p>${product.price} FCFA</p>
                `;
                productCard.addEventListener('click', () => openModal(product));
                productList.appendChild(productCard);
            });
        }

        function setupFilters(products) {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('bg-black', 'text-white'));
                    filterButtons.forEach(btn => btn.classList.add('bg-gray-200', 'text-black'));
                    button.classList.remove('bg-gray-200', 'text-black');
                    button.classList.add('bg-black', 'text-white');
                    const type = button.getAttribute('data-type');
                    const filteredProducts = type === 'Tous' ? products : products.filter(p => p.type === type);
                    displayProducts(filteredProducts);
                });
            });
        }

        function openModal(product) {
            const modal = document.getElementById('product-modal');
            document.getElementById('modal-title').textContent = product.name;
            const mainImage = document.getElementById('modal-main-image');
            mainImage.src = product.images.front;
            const thumbnailFront = document.getElementById('modal-thumbnail-front');
            const thumbnailBack = document.getElementById('modal-thumbnail-back');
            thumbnailFront.src = product.images.front;
            thumbnailBack.src = product.images.back;
            thumbnailFront.classList.add('thumbnail-active');
            thumbnailBack.classList.remove('thumbnail-active');
            document.getElementById('modal-description').textContent = product.description;
            document.getElementById('modal-price').textContent = `${product.price} FCFA`;
            
            const sizeSelect = document.getElementById('modal-size');
            sizeSelect.innerHTML = product.sizes.map(size => `<option value="${size}">${size}</option>`).join('');
            
            modal.classList.remove('hidden');

            thumbnailFront.addEventListener('click', () => {
                mainImage.src = product.images.front;
                thumbnailFront.classList.add('thumbnail-active');
                thumbnailBack.classList.remove('thumbnail-active');
            });

            thumbnailBack.addEventListener('click', () => {
                mainImage.src = product.images.back;
                thumbnailFront.classList.remove('thumbnail-active');
                thumbnailBack.classList.add('thumbnail-active');
            });

            document.getElementById('close-modal').addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            document.getElementById('add-to-cart').addEventListener('click', () => {
                const cartCount = document.getElementById('cart-count');
                cartCount.textContent = parseInt(cartCount.textContent) + 1;
            });
        }
    </script>
</body>
</html>
